<div class="product-details-container" *ngIf="album">
  <button routerLink="/produtos" class="btn-back">â† Voltar</button>

  <div class="details-content">
    <div class="image-section">
      <div class="image-container">
        <img [src]="currentImage" [alt]="album.title" class="main-image" />
      </div>

      <!-- Inclusions Carousel -->
      <div
        class="inclusions-carousel"
        *ngIf="album.inclusionImages && album.inclusionImages.length > 0"
      >
        <h3>o que vem dentro? âœ¨</h3>
        <div class="carousel-track">
          <!-- Using main image as first item in carousel too, or just inclusions -->
          <img
            *ngFor="let img of album.inclusionImages"
            [src]="img"
            class="carousel-item"
            (click)="currentImage = img"
          />
        </div>
      </div>
    </div>

    <div class="info-section">
      <h1 class="title">{{ album.title }}</h1>

      <!-- Price updates dynamically -->
      <p class="price">R$ {{ currentPrice | number : "1.2-2" }}</p>

      <div class="description">
        <h3>Sobre o Ãlbum</h3>
        <p>{{ album.description }}</p>
      </div>

      <div
        class="versions-section"
        *ngIf="album.versions && album.versions.length > 0"
      >
        <h3>Escolha sua versÃ£o:</h3>
        <div class="versions-list">
          <button
            *ngFor="let version of album.versions"
            [class.active]="selectedVersion === version"
            (click)="selectVersion(version)"
          >
            {{ version.name }}
          </button>

          <!-- Random Option -->
          <button
            class="btn-random"
            *ngIf="album.hasRandomOption"
            [class.active]="selectedVersion?.name === 'RANDOM ğŸ²'"
            (click)="selectRandom()"
          >
            ğŸ² RANDOM
          </button>
        </div>
      </div>

      <div class="actions-group">
        <button
          class="btn-add-cart"
          (click)="addToCart()"
          [disabled]="!selectedVersion"
        >
          Adicionar {{ selectedVersion?.name }} ğŸ›’
        </button>

        <button
          class="btn-add-set"
          *ngIf="album.hasSetOption"
          (click)="addSetToCart()"
        >
          Comprar SET Completo ğŸ“¦
        </button>
      </div>
    </div>
  </div>
</div>

<div *ngIf="!album" class="not-found">
  <p>Produto nÃ£o encontrado.</p>
  <button routerLink="/produtos" class="btn-back">Voltar para a Loja</button>
</div>
